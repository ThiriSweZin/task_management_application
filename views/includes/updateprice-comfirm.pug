div.modal.fade#dialogPriceConfirm(tabindex='-1', role='dialog', aria-labelledby='changepriceConfirm')
    div.modal-dialog.modal-sm(role='document')
        div.modal-content
            div.modal-header
                h4.modal-title Change Price
                button.close(type='button', data-dismiss='modal', aria-label='Close')
                    span(aria-hidden='true') &times;
            div.modal-body
                form.form-horizontal
                    div.form-group.row
                        label.col-sm-2.control-label(for='price') Price
                        div.col-sm-10
                            input.form-control#price(type='text', name='price', value=price, maxlength="12", role="number", required autofocus)
                form#postSuccessForms(method='GET', action=listUrl)
            div.modal-footer
                button.btn.btn-primary#dialogAccept(type='button', data-dismiss='modal') Ok
                button.btn.btn-secondary#dialogCancel(type='button', data-dismiss='modal') Cancel
            

div.alert.alert-success.alert-dismissible#alertPriceSuccess(role='alert', style="display:none;")
    strong Success 
    span#delSuccessMsg Change Price Successful.
    button.close(type='button', data-hide='alert', aria-label='Close')
        span(aria-hidden='true') &times;

div.alert.alert-danger.alert-dismissible#alertPriceError(role='alert', style="display:none;")
    strong Error 
    span#delErrorMsg Can not change price.
    button.close(type='button', data-hide='alert', aria-label='Close')
        span(aria-hidden='true') &times;

script.
    $(document).ready(function(){
        var token = "!{token}";
        $("#alert").hide();
        $("#progress").hide();
        $('#dialogPriceConfirm').on('show.bs.modal', function (event) {
            var button = $(event.relatedTarget);
            var id = button.data('id');
            var productid = id;
            $.ajax({
                url: "/api/productview/getProductPriceByID?productid="+productid,
                method: "GET",
                headers: {"authorization": "Bearer " + token},
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                dataSrc: "data",
                //- dataSrc: function ( json ) {
                //-       console.table("product data >> ",json);
                //-       return json;
                //-     }
                success: function(data) {
                    console.log("success ", data.price);
                    $("#price").val(data.price);
                }
            });
            $(this).attr('data-id', id);
            $(this).find('#dialogAccept').on('click', function(event) {
                var price = $("#price").val();
                console.log("price pug ", price);
                var detial = {
                    productid : id,
                    productprice : price,
                };
                console.log("data pug ", detial);
                $.ajax({
                    url: "/product/editprice/"+id,
                    method: "POST",
                    contentType: "application/json; charset=utf-8",
                    dataType: "json",
                    data: JSON.stringify(detial),
                    success: function(result) {
                        console.log("success data", result);
                        if (result.message == "success") {
                            location.reload();
                            $('#alertPriceError').hide();
                            $('#alertPriceSuccess').show();
                            
                        } else {
                            $('#alertPriceError').show();
                            $("#alert").addClass("alert-danger").show();
                        }
                    }
                });
            });
        }).on('hide.bs.modal', function (event) {
            $(this).attr('data-id', '');
            $(this).find('#dialogAccept').off('click');
        });
    })